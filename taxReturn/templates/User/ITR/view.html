<!-- view.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}TaxBuddy - View ITR{% endblock %}</title>
    
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'User/ITR/css/style.css' %}">
    
    <style>
        .view-header {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border-radius: 20px;
            padding: 3rem 2rem;
            color: white;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .view-header::before {
            content: '';
            position: absolute;
            top: -30%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        .info-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 1.5rem;
        }
        
        .info-card h5 {
            color: #4a5568;
            font-weight: 600;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #e9ecef;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .info-item {
            padding: 1.25rem;
            border-radius: 12px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
        }
        
        .info-item .label {
            font-size: 0.85rem;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }
        
        .info-item .value {
            font-size: 1.25rem;
            font-weight: 600;
            color: #2d3748;
        }
        
        .document-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .document-item {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
        }
        
        .document-item:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .document-item .icon {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 1rem;
        }
        
        .tax-summary {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 16px;
            padding: 2rem;
        }
        
        .tax-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .tax-item:last-child {
            border-bottom: none;
        }
        
        .tax-total {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .status-badge-large {
            display: inline-flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
    </style>
</head>
<body>
    <div class="app-container">
        {% include 'User/layouts/sidebar.html' %}
        <div class="mobile-overlay" id="mobileOverlay"></div>
        
        <div class="main-content" id="mainContent">
            {% include 'User/layouts/header.html' %}
            
            <div class="content-wrapper">
                <div class="container-fluid py-4">
                    <!-- Header -->
                    <div class="view-header animate-fadeInUp">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h2>ITR Submission Details</h2>
                                <p class="mb-0">Assessment Year: {{ itr.assessment_year }}</p>
                            </div>
                            <div class="col-md-4 text-end">
                                <span class="status-badge-large">
                                    <i class="fas fa-check-circle me-2"></i>
                                    {{ itr.get_status_display }}
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Success Alert -->
                    <div class="alert alert-success alert-modern d-flex align-items-center mb-4" role="alert">
                        <div class="alert-icon">
                            <i class="fas fa-check-circle fa-2x"></i>
                        </div>
                        <div class="ms-3">
                            <h5 class="alert-heading mb-1">ITR Successfully Submitted!</h5>
                            <p class="mb-0">Your ITR for {{ itr.assessment_year }} has been submitted successfully and is now under review.</p>
                        </div>
                    </div>

                    <!-- Personal Information -->
                    {% comment %} <div class="info-card">
                        <h5><i class="fas fa-user me-2"></i>Personal Information</h5>
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="label">Full Name</div>
                                <div class="value">{{ itr.full_name }}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">PAN Number</div>
                                <div class="value">{{ itr.pan }}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">Aadhaar Number</div>
                                <div class="value">{{ itr.aadhaar }}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">Date of Birth</div>
                                <div class="value">{{ itr.dob|date:"d M Y" }}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">Assessment Year</div>
                                <div class="value">{{ itr.assessment_year }}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">Submission Date</div>
                                <div class="value">{{ itr.updated_at|date:"d M Y, h:i A" }}</div>
                            </div>
                        </div>
                    </div> {% endcomment %}
                    <div class="info-card">
    <h5><i class="fas fa-user me-2"></i>Personal Information</h5>

    <div class="info-grid">
        <div class="info-item">
            <div class="label">Full Name</div>
            <div class="value">{{ itr.user.full_name }}</div>
        </div>

        <div class="info-item">
            <div class="label">PAN Number</div>
            <div class="value">{{ itr.user.pan_number }}</div>
        </div>

        <div class="info-item">
            <div class="label">Aadhaar Number</div>
            <div class="value">{{ itr.user.aadhaar_number }}</div>
        </div>

        <div class="info-item">
            <div class="label">Date of Birth</div>
            <div class="value">{{ itr.user.dob|date:"d M Y" }}</div>
        </div>

        <div class="info-item">
            <div class="label">Assessment Year</div>
            <div class="value">{{ itr.assessment_year }}</div>
        </div>

        <div class="info-item">
            <div class="label">Submission Date</div>
            <div class="value">{{ itr.created_at|date:"d M Y, h:i A" }}</div>
        </div>
    </div>
</div>


                    <!-- Income Summary -->
                    <div class="info-card">
                        <h5><i class="fas fa-chart-bar me-2"></i>Income Summary</h5>
                        <div class="tax-summary">
                            <div class="tax-item">
                                <span>Salary Income</span>
                                <span class="fw-bold">₹ {{ itr.salary_income|default:"0"|floatformat:2 }}</span>
                            </div>
                            <div class="tax-item">
                                <span>Business Income</span>
                                <span class="fw-bold">₹ {{ itr.business_income|default:"0"|floatformat:2 }}</span>
                            </div>
                            <div class="tax-item">
                                <span>Other Income</span>
                                <span class="fw-bold">₹ {{ itr.other_income|default:"0"|floatformat:2 }}</span>
                            </div>
                            <div class="tax-total">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="h5 mb-0">Total Income</span>
                                    <span class="h4 text-success mb-0">
                                        ₹ {{ itr.gross_income }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Deductions -->
                    <div class="info-card">
                        <h5><i class="fas fa-percentage me-2"></i>Deductions</h5>
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="label">80C Deduction</div>
                                <div class="value text-success">₹ {{ itr.deduction_80c|default:"0"|floatformat:2 }}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">80D Deduction</div>
                                <div class="value text-success">₹ {{ itr.deduction_80d|default:"0"|floatformat:2 }}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">Total Deductions</div>
                                <div class="value text-success">₹ {{ itr.total_deduction }}</div>
                            </div>
                            <div class="info-item">
                                <div class="label">Taxable Income</div>
                                <div class="value text-primary">₹ {{ itr.taxable_income }}</div>
                            </div>
                        </div>
                    </div>

                     <div class="info-card">
                        <h5><i class="fas fa-percentage me-2"></i>Estimated Tax</h5>
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="label">80C Deduction</div>
                                <div class="value text-success">₹ {{ itr.tax_payable }}</div>
                            </div>
                           
                        </div>
                    </div>

                    <!-- Uploaded Documents -->
                    <div class="info-card">
                        <h5><i class="fas fa-file-upload me-2"></i>Uploaded Documents</h5>
                        <div class="document-grid">
                            {% if itr.pan_card %}
                            <div class="document-item">
                                <div class="icon">
                                    <i class="fas fa-id-card"></i>
                                </div>
                                <h6>PAN Card</h6>
                                <a href="{{ itr.pan_card.url }}" target="_blank" class="btn btn-outline-primary btn-sm mt-2">
                                    <i class="fas fa-download me-1"></i>Download
                                </a>
                            </div>
                            {% endif %}
                            
                            {% if itr.aadhaar_card %}
                            <div class="document-item">
                                <div class="icon">
                                    <i class="fas fa-address-card"></i>
                                </div>
                                <h6>Aadhaar Card</h6>
                                <a href="{{ itr.aadhaar_card.url }}" target="_blank" class="btn btn-outline-primary btn-sm mt-2">
                                    <i class="fas fa-download me-1"></i>Download
                                </a>
                            </div>
                            {% endif %}
                            
                            {% if itr.form_16 %}
                            <div class="document-item">
                                <div class="icon">
                                    <i class="fas fa-file-invoice"></i>
                                </div>
                                <h6>Form 16</h6>
                                <a href="{{ itr.form_16.url }}" target="_blank" class="btn btn-outline-primary btn-sm mt-2">
                                    <i class="fas fa-download me-1"></i>Download
                                </a>
                            </div>
                            {% endif %}
                            
                            {% if itr.bank_statement %}
                            <div class="document-item">
                                <div class="icon">
                                    <i class="fas fa-university"></i>
                                </div>
                                <h6>Bank Statement</h6>
                                <a href="{{ itr.bank_statement.url }}" target="_blank" class="btn btn-outline-primary btn-sm mt-2">
                                    <i class="fas fa-download me-1"></i>Download
                                </a>
                            </div>
                            {% endif %}
                        </div>
                    </div>



                    <!-- Action Buttons -->
                    <div class="info-card">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="mb-0">Actions</h5>
                                <p class="text-muted mb-0">Manage your submitted ITR</p>
                            </div>
                            <div class="btn-group" role="group">
                                <a href="{% url 'itr_list' %}" class="btn btn-outline-secondary btn-modern">
                                    <i class="fas fa-arrow-left me-2"></i>Back to Dashboard
                                </a>
                                <button class="btn btn-primary btn-modern">
                                    <i class="fas fa-download me-2"></i>Download PDF
                                </button>
                                <button class="btn btn-success btn-modern">
                                    <i class="fas fa-print me-2"></i>Print
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            {% include 'User/layouts/footer.html' %}
        </div>
    </div>
    
    <script src="{% static 'js/main.js' %}"></script>
    <script>
        // Print functionality
        document.querySelector('.btn-success').addEventListener('click', function() {
            window.print();
        });
        
        // Download PDF functionality (simulated)
        document.querySelector('.btn-primary').addEventListener('click', function() {
            alert('PDF download will be available soon!');
        });
        
        // Add hover effects to document items
        document.querySelectorAll('.document-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
            });
            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>
</html>